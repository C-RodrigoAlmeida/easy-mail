{% load numeric_tags %}
<div class="flex gap-3">
    <select 
        name="{{ field_name }}_method" 
        class="block basis-1/5 p-2.5 border border-gray-300 rounded-lg bg-gray-700 border-gray-600 text-white"
        onchange="this.form.submit()"
    >
        <option {% if method == 'manual' or not method %} selected {% endif %} value="manual">Manual</option>
        <option {% if method == 'recipient' %} selected {% endif %} value="recipient">In Contacts</option>
        <option {% if method == 'group' %} selected {% endif %} value="group">Group</option>
        <option {% if method == 'file' %} selected {% endif %} value="file">Contacts in File</option>
    </select> 
    {% if method == 'manual' or not method %}
    <input 
        type="text"
        name="{{ field_name }}"
        class="block basis-4/5 p-2.5 border border-gray-300 rounded-lg bg-gray-700 border-gray-600 text-white"
        value="{{ value }}"
        placeholder="Type the {{ field_name|title }} email here"
    >
    {% elif method == 'recipient' %}
    <select name="{{ field_name }}" class="block basis-4/5 p-2.5 border border-gray-300 rounded-lg bg-gray-700 border-gray-600 text-white">
        <option selected value="">Select an option</option>
        {% for recipient in recipients %}
            <option {% if recipient.pk == value|to_int %} selected {% endif %} value="{{ recipient.pk }}">{{ recipient }}</option>
        {% endfor %}
    </select>
    {% elif method == 'group' %}
    <select name="{{ field_name }}" class="block basis-4/5 p-2.5 border border-gray-300 rounded-lg bg-gray-700 border-gray-600 text-white">
        <option selected value="">Select an option</option>
        {% for group in groups %}
            <option {% if group.id == value|to_int %} selected {% endif %} value="{{ group.id }}">{{ group }}</option>
        {% endfor %}
    </select>
    {% elif method == 'file' %}
    <input type="file" name="{{ field_name }}" class="block basis-4/5 p-2.5 border border-gray-300 rounded-lg bg-gray-700 border-gray-600 text-white">
    {% endif %}
</div>
